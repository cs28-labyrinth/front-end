(this.webpackJsonplabyrinth=this.webpackJsonplabyrinth||[]).push([[0],{102:function(e,t,n){},103:function(e,t,n){},126:function(e,t,n){},127:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(87),o=n.n(c),i=(n(102),n(33)),u=(n(103),n(29)),l=n(19),s=n(11),m=n.n(s);function p(){var e=Object(i.g)();return r.a.createElement(l.c,{initialValues:{username:"",password:""},onSubmit:function(t){m.a.post("https://cs28labyrinth.herokuapp.com/api/login/",Object(u.a)({},t)).then((function(t){localStorage.setItem("token","Token ".concat(t.data.key)),e.push("/mainpage")})).catch((function(e){return console.log(e)}))}},r.a.createElement(l.b,null,r.a.createElement("span",null,"Username: "),r.a.createElement(l.a,{type:"username",name:"username"}),r.a.createElement("span",null,"Password: "),r.a.createElement(l.a,{type:"password",name:"password"}),r.a.createElement("button",{type:"submit"},"Log In")))}var d=n(57);function b(e){var t=d.a().shape({username:d.b().min(5,"Must be between 5 and 15 characters.").max(15,"Must be between 5 and 15 characters.").required("Required Field"),password1:d.b().min(5,"Must be between 5 and 15 characters.").max(15,"Must be between 5 and 15 characters.").required("Required Field"),password2:d.b().min(5,"Must be between 5 and 15 characters.").max(15,"Must be between 5 and 15 characters.").required("Required Field")});console.log(e);var n=Object(i.g)();return r.a.createElement(l.c,{initialValues:{username:"",password1:"",password2:""},validationSchema:t,onSubmit:function(e){m.a.post("https://cs28labyrinth.herokuapp.com/api/registration/",Object(u.a)({},e,{id:Date.now})).then((function(e){console.log(e),n.push("/login")})).catch((function(e){return console.log(e)}))}},(function(e,t){return r.a.createElement(l.b,null,r.a.createElement("span",null,"Username: "),r.a.createElement(l.a,{type:"username",name:"username"}),e.username&&t.username?r.a.createElement("div",null,e.username):null,r.a.createElement("span",null,"Password1: "),r.a.createElement(l.a,{type:"password",name:"password1"}),r.a.createElement("span",null,"Password2: "),r.a.createElement(l.a,{type:"password",name:"password2"}),r.a.createElement("button",{type:"submit"},"Register"))}))}var h=n(34),f=n(46),g=n(47);function v(){var e=Object(f.a)(["\n\tbackground-image: linear-gradient(to bottom right, lightblue, darkblue);\n\tcolor: white;\n\n\tp {\n\t\tcolor: black;\n\t}\n\twidth: 400px;\n\theight: 250px;\n\tborder: ridge 5px dodgerblue;\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: space-between;\n\tmargin: 20px;\n"]);return v=function(){return e},e}var E=g.a.div(v()),w=function(e){return r.a.createElement(E,null,r.a.createElement("h3",null,"Room: ",e.getTitle),r.a.createElement("div",null,e.getDescription))},y=function(){var e=localStorage.getItem("token");return m.a.create({baseURL:"https://cs28labyrinth.herokuapp.com/",headers:{Authorization:e}})},j=function(){y().post("api/adv/move/",{direction:"n"}).then((function(e){console.log(e.data)})).catch((function(e){return console.log(e)}))},k=function(){y().post("/api/adv/move/",{direction:"e"}).then((function(e){console.log(e.data)}))},O=function(){y().post("/api/adv/move/",{direction:"s"}).then((function(e){console.log(e.data)}))},x=function(){y().post("/api/adv/move/",{direction:"w"}).then((function(e){console.log(e.data)}))};function S(){var e=Object(f.a)(["\n\tbackground-image: linear-gradient(to bottom right, lightblue, darkblue);\n\tcolor: white;\n\twidth: 400px;\n\theight: 200px;\n\tborder: ridge 5px dodgerblue;\n\talign-items: center;\n\tjustify-content: space-between;\n\tmargin: 20px;\n"]);return S=function(){return e},e}var N=g.a.div(S());function q(){Object(i.g)();return r.a.createElement(N,null,r.a.createElement("h3",null,"Choose which direction to move:"),r.a.createElement("button",{onClick:j},"N"),r.a.createElement("button",{onClick:k},"E"),r.a.createElement("button",{onClick:O},"S"),r.a.createElement("button",{onClick:x},"W"))}function M(){var e=Object(a.useState)([]),t=Object(h.a)(e,2),n=t[0],c=t[1];return Object(a.useEffect)((function(){m.a.get("https://cs28labyrinth.herokuapp.com/api/adv/rooms/").then((function(e){var t=e.data.rooms;c(t)})).catch((function(e){return console.log(e)}))}),[]),r.a.createElement(r.a.Fragment,null,n.map((function(e){return r.a.createElement(w,{getTitle:e.fields.title,getDescription:e.fields.description})})),r.a.createElement(q,null))}var R=n(96),C=function(e){var t=e.component,n=Object(R.a)(e,["component"]);return r.a.createElement(i.b,Object.assign({},n,{render:function(e){return localStorage.getItem("token")?r.a.createElement(t,e):r.a.createElement(i.a,{to:"/login"})}}))},I=n(12);function L(){var e=Object(f.a)(["\n\tbackground-image: linear-gradient(to bottom right, lightblue, white);\n\tcolor: white;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-evenly;\n"]);return L=function(){return e},e}var T=g.a.div(L());function _(){return r.a.createElement(T,null,r.a.createElement(I.b,{to:"/login"},"Log In"),r.a.createElement(I.b,{to:"/mainpage"},"Home"),r.a.createElement(I.b,{to:"/mappage"},"Play The Game"),r.a.createElement(I.b,{to:"/register"},"Sign Out"))}var P=n(53),D=n(95),F=n(56),A=n.n(F),U=n(74);n(126);function J(e){var t=e.messages,n=Object(a.useRef)(null);return console.log(t),r.a.createElement("div",null,r.a.createElement("div",null,t&&t.map((function(e,t){return r.a.createElement("div",{key:t},e.user," : ",e.message)}))),r.a.createElement("div",null,r.a.createElement("input",{ref:n,type:"text"}),r.a.createElement("button",{onClick:function(){y().post("/api/adv/say/",{message:n.current.value}).then((function(e){n.current.value=""}))}},"Send")))}function V(){var e=Object(a.useState)(),t=Object(h.a)(e,2),n=(t[0],t[1]),c=Object(a.useState)(),o=Object(h.a)(c,2),i=o[0],l=o[1],s=Object(a.useState)([]),p=Object(h.a)(s,2),d=p[0],b=p[1],f=Object(a.useState)(),g=Object(h.a)(f,2),v=g[0],E=g[1],j=Object(a.useState)({}),k=Object(h.a)(j,2),O=k[0],x=k[1];return Object(a.useEffect)((function(){function e(){return(e=Object(U.a)(A.a.mark((function e(){var t,a;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.a.get("https://cs28labyrinth.herokuapp.com/api/adv/rooms/");case 2:t=e.sent,a=Math.sqrt(t.data.rooms.length),n(a),t.data.rooms.sort((function(e,t){return e.pk-t.pk})),l(t.data.rooms);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function t(){return(t=Object(U.a)(A.a.mark((function e(){var t,n;return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y().get("https://cs28labyrinth.herokuapp.com/api/adv/init/");case 2:return t=e.sent,E(t.data),n=new window.Pusher("34ea5cc8c99a7964e5da",{cluster:"us2"}),n.subscribe("p-channel-".concat(t.data.uuid)).bind("broadcast",(function(e){b((function(t){return[].concat(Object(D.a)(t),[e])}))})),n.subscribe("p-channel-".concat(t.data.uuid)).bind("enter",(function(e){x((function(t){return Object(u.a)({},t,Object(P.a)({},e.uuid,e.current_room))}))})),n.subscribe("p-channel-".concat(t.data.uuid)).bind("move",(function(e){x((function(t){return Object(u.a)({},t,Object(P.a)({},e.uuid,e.current_room))})),y().get("https://cs28labyrinth.herokuapp.com/api/adv/init/").then((function(e){return E(e.data)}))})),n.subscribe("p-channel-".concat(t.data.uuid)).bind("exit",(function(e){x((function(t){return delete t[e.uuid],Object(u.a)({},t)}))})),e.next=15,y().get("https://cs28labyrinth.herokuapp.com/api/adv/enter/");case 15:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function a(e){y().get("https://cs28labyrinth.herokuapp.com/api/adv/exit/").then((function(e){return e}))}return function(){e.apply(this,arguments)}(),function(){t.apply(this,arguments)}(),window.addEventListener("beforeunload",a),window.removeEventListener("beforeunload",a)}),[]),console.log(v),r.a.createElement("div",{className:"outer"},r.a.createElement("div",{className:"labyrinth"},r.a.createElement("div",{className:"room-container"},i&&i.map((function(e,t){var n=e.fields,a="room";for(var c in n.e_to||(a=a.concat(" ","border-right")),n.w_to||(a=a.concat(" ","border-left")),n.n_to||(a=a.concat(" ","border-top")),n.s_to||(a=a.concat(" ","border-bottom")),O)if(O[c]===e.pk){a=a.concat(" ","player");break}return r.a.createElement("div",{className:a,key:e.pk})}))),r.a.createElement(q,null)),r.a.createElement("div",{className:"menu"},r.a.createElement(w,{getTitle:null===v||void 0===v?void 0:v.title,getDescription:null===v||void 0===v?void 0:v.description}),r.a.createElement(J,{messages:d})))}var z=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"The Labyrinth"),r.a.createElement(_,null),r.a.createElement("header",{className:"App-header"},r.a.createElement(i.d,null,r.a.createElement(i.b,{exact:!0,path:"/login",component:p}),r.a.createElement(i.b,{exact:!0,path:"/register",component:b}),r.a.createElement(C,{exact:!0,path:"/mainpage",component:M}),r.a.createElement(C,{exact:!0,path:"/mappage",component:V}))))};o.a.render(r.a.createElement(I.a,null,r.a.createElement(z,null)),document.getElementById("root"))},97:function(e,t,n){e.exports=n(127)}},[[97,1,2]]]);
//# sourceMappingURL=main.c11e972d.chunk.js.map